import os
import requests
from zipfile import ZipFile

def download_fma_small():
    url = "https://os.unil.cloud.switch.ch/fma/fma_small.zip"
    os.makedirs("data", exist_ok=True)
    zip_path = "data/fma_small.zip"

    if not os.path.exists(zip_path):
        print("‚¨áÔ∏è  Scarico fma_small.zip...")
        r = requests.get(url, stream=True)
        with open(zip_path, "wb") as f:
            for chunk in r.iter_content(chunk_size=8192):
                if chunk:
                    f.write(chunk)
        print("‚úÖ Download completato!")

        print("üì¶ Estrazione dei file...")
        with ZipFile(zip_path, "r") as zip_ref:
            zip_ref.extractall("data/")
        print("‚úÖ Estrazione completata!")
    else:
        print("‚ÑπÔ∏è  Dataset gi√† presente, nessuna azione necessaria.")

if __name__ == "__main__":
    download_fma_small()
